云原生平台规划，首先了解下我们平台是如何帮助业务线实现价值的

![ke平台](/Users/wuchenghao/study/bblog/static/images/ke平台.png)

KubeEase 平台的最初的需求点应该是 Kubernetes 的使用门槛过高，所以需要有一个**<u>简单易用，可靠</u>**的平台 ，可以方便让应用开发人员使用。这个应该也一直会是我们平台发展的核心价值。

至少根据上图我们可以得到，我们主要的需求来源应该是上层应用的业务需求 与 Kubernetes 提供的原生功能不能满足的矛盾，那么我们可以假想下后期我们平台会有可能演变成如下的样子，不过这是题外话了。

![aa_ke平台](/Users/wuchenghao/study/bblog/static/images/aa_ke平台.png)

回归我们的主题平台规划我认为至少有两点

1. 业务在不同场景中落地的时候，当原生k8s没有好的处理方案。（比如IOT在落地的时候 可能会出现的 前端采集的数据量过大，如果按照传统模式，将数据全部上传，成本高、效率低，例如风机发电场景，我们的充电桩当后期业务量发展之后也会遇到相同的问题，现有的解决方案多数为边缘网关 或者 易于部署在嵌入式的的单体Kubernetes ，我们是不是也可以开发一个mini_kubeease项目）（在比如如何将ML机器学习更好的应用在Kubernetes中，最简单的需求应该就是 人工智能或者大数据的 中间件管理了，当然需求不局限于此，可以查看KubeFlow项目）。这类需求我们可以发现是重度依赖业务的落地场景的，换句话说是需要我们有相关业务场景的背景与知识才可以挖掘出需求。当然我个人认为做平台最后是需要开发人员做到学科交叉，需要了解业务知识。

2. Kubernetes 并没有把 云原生的各方面都做好或者做到，但是对业务来说又是强需求，比如 网络方面(CNI插件pod间通信（根据不同的进行进行实现），集群内外DNS服务，服务网格，负载均衡)，存储方面（CSI），监控告警（prometheus,grafana,deepflow,睿象云）

   针对其中的每一点都可以进行展开，但是我们需要时刻明白我们做这个功能的出发点是 让应用开发人员更加简单易用，如果这个需求没有那么强烈的需求，或者已经有成熟的第三方技术实现

   我针对我能想到的进行展开说下

   服务网格

   1. 4层，7层流量的管控（QPS，带宽，重试，熔断，降级，身份认证）
   2. 4层，7层流量的观测与记录（指标暴露metrics，链路追踪）

   负载均衡

   1. 4层，7层流量管控（证书认证，IP透传）
   2. 外部域名证书认证替换（因为每年都会有一次替换过程）
   3. 外部交互 的集成 （阿里云SLB，腾讯云ELB）
   4. 身份认证（加解密功能实现，签名，IP黑白名单）
   5. WAF 防DDOS攻击
   
   CNI
   
   1. 当前CNI的实现成本过高（overlay对性能有损耗，非overlay直接路由的方式操作成本较高），我们是否可以用ebpf 同时具备高性能与可操作性高的可能
   
   存储方面
   
   监控告警



还有一些云原生核心功能是否做好

比如我们的devops，在我使用我们的流水线的过程中 至少感觉到几点我们的流水线的概念还是不够贴近真实的 业务开发流程，这里倒不是指单个功能，而是现有的流水线能否满足一个较为复杂的CI过程，那我的网关为例子，网关的CI过程 会需要在 一整个CI生命周期中需要功能每一步的内容，或者数据或者环境，换言之我们 流水线 应该在每个组件的基础上 多一个JOB的概念，在一个JOB 中至少可以共享一个 底层系统网络，存储.....。